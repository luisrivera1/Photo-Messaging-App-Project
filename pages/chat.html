

<a class="waves-effect blue-grey lighten-1 btn-small" ng-click="chatCtrl.redirectToHome()">Home<i
                                              aria-hidden="true"></i></a>
<style>
    body {
        margin: 20px;
    }


    .btn-circle {
        width: 30px;
        height: 30px;
        text-align: center;
        padding: 6px 0;
        font-size: 12px;
        line-height: 1.428571429;
        border-radius: 15px;
    }

    .chat_ib h5 {
        font-size: 15px;
        color: #464646;
        margin: 0 0 8px 0;
    }

    .chat_ib h5 span {
        font-size: 13px;
        float: right;
    }

    .chat_ib p {
        font-size: 14px;
        color: #989898;
        margin: auto
    }

    .chat_img {
        float: left;
        width: 11%;
        border-radius: 50%;
    }

    .chat_ib {
        float: left;
        padding: 0 0 0 15px;
        width: 88%;
    }

    .chat_people {
        overflow: hidden;
        clear: both;
    }

    .chat {
        /*margin-top: auto;*/
        margin-bottom: auto;
    }

    .card {
        height: 700px;
        border-radius: 15px !important;
        overflow: auto;
    }

    .color-card {
        background-color: rgba(0, 0, 0, 0.4) !important;
    }

    .card-header {
        border-radius: 15px 15px 0 0 !important;
        border-bottom: 0 !important;
    }

    .card-footer {
        border-radius: 0 0 15px 15px !important;
        border-top: 0 !important;
    }

    .container {
        align-content: center;
    }

    .send_btn {
        border-radius: 0 15px 15px 0 !important;
        background-color: rgba(0, 0, 0, 0.3) !important;


        border: 0 !important;
        color: white !important;
        cursor: pointer;
    }

    .card-signin {
        border: 0;
        border-radius: 1rem;
        box-shadow: 0 0.5rem 1rem 0 rgba(0, 0, 0, 0.1);
        max-height: 500px;
        overflow: auto;
    }

    .card-signin .card-title {
        margin-bottom: 2rem;
        font-weight: 300;
        font-size: 1.5rem;
    }

    .card-signin .card-body {
        padding: 2rem;
    }

    .form-signin {
        width: 100%;
    }

    .form-signin .btn {
        font-size: 80%;
        border-radius: 5rem;
        letter-spacing: .1rem;
        font-weight: bold;
        /*padding: 1rem;*/
        transition: all 0.2s;
    }

    .form-label-group {
        position: relative;
        margin-bottom: 1rem;
    }

    .form-label-group input {
        height: auto;
        border-radius: 2rem;
    }

    .form-label-group > input,
    .form-label-group > label {
        padding: var(--input-padding-y) var(--input-padding-x);
    }

    .form-label-group > label {
        position: absolute;
        top: 0;
        left: 0;
        display: block;
        width: 100%;
        margin-bottom: 0;
        /* Override default `<label>` margin */
        line-height: 1.5;
        color: #495057;
        border: 1px solid transparent;
        border-radius: .25rem;
        transition: all .1s ease-in-out;
    }

    .form-label-group input::-webkit-input-placeholder {
        color: transparent;
    }

    .form-label-group input:-ms-input-placeholder {
        color: transparent;
    }

    .form-label-group input::-ms-input-placeholder {
        color: transparent;
    }

    .form-label-group input::-moz-placeholder {
        color: transparent;
    }

    .form-label-group input::placeholder {
        color: transparent;
    }

    .form-label-group input:not(:placeholder-shown) {
        padding-top: calc(var(--input-padding-y) + var(--input-padding-y) * (2 / 3));
        padding-bottom: calc(var(--input-padding-y) / 3);
    }

    .form-label-group input:not(:placeholder-shown) ~ label {
        padding-top: calc(var(--input-padding-y) / 3);
        padding-bottom: calc(var(--input-padding-y) / 3);
        font-size: 12px;
        color: #777;
    }

    .received_withd_msg {
        width: 57%;
    }

    .mesgs {
        float: left;
        padding: 30px 15px 0 25px;
        width: 80%;
    }

    .sent_msg p {
        background: #05728f none repeat scroll 0 0;
        border-radius: 3px;
        font-size: 14px;
        margin: 0;
        color: #fff;
        padding: 5px 10px 5px 12px;
        width: 100%;
    }

    .outgoing_msg {
        overflow: hidden;
        margin: 26px 0 26px;
    }

    .sent_msg {
        float: right;
        width: 46%;
    }

    .input_msg_write input {
        background: rgba(0, 0, 0, 0) none repeat scroll 0 0;
        border: medium none;
        color: #4c4c4c;
        font-size: 15px;
        min-height: 48px;
        width: 100%;
    }

    .type_msg {
        border-top: 1px solid #c4c4c4;
        position: relative;
    }

    .msg_send_btn {
        background: #05728f none repeat scroll 0 0;
        border: medium none;
        border-radius: 50%;
        color: #fff;
        cursor: pointer;
        font-size: 17px;
        height: 33px;
        position: absolute;
        right: 0;
        top: 11px;
        width: 33px;
    }

    .messaging {
        padding: 10px 0;
    }

    body, html {
        height: 100%;
        margin: 0;
        background: #7F7FD5;
        background: -webkit-linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5);
        /*background: linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5);*/
        background: linear-gradient(to right, #7fd5c163, #86dee7, #7fd5c163);
    }

    .reply_container {
        margin-bottom: auto;
        margin-left: 10px;
        border-radius: 25px;
        background-color: #5c6bc0;
        padding: 10px;
        position: relative;
        max-height: 300px;
        overflow: auto;
    }

    .contacts {
    list-style: none;
    padding: 0;
}

 .contacts li {
    width: 100% !important;
    padding: 5px 10px;
    margin-bottom: 15px !important;
}
@media (max-width: 576px) {
    .contacts_card {
        margin-bottom: 15px !important;
    }
}

.msg_container {
    margin-top: auto;
    margin-bottom: auto;
    margin-left: 10px;
    border-radius: 25px;
    background-color: #82ccdd;
    padding: 10px;
    position: relative;
}

</style>
<div class="container-fluid">
    <div class="row justify-content-center h-100">
        <div class="col-sm-9 col-md-7 col-lg-5 mx-auto chat">
            <div class="card mb-sm-3 mb-md-0 contacts_card">
                <div class="card-header" id="chatname"></div>


                <div class="card-body contacts_body">
                    <div>
                        <h2>
                            <center>Users in Chat</center>
                            <div class="d-flex justify-content-end">
                                <button type="submit" class="btn-floating btn-small waves-effect grey"name="action" id="addUser" ng-click="chatCtrl.addUserToChat()" >

                                        <i class="material-icons">add </i>
                                    </button>
                            </div>

                        </h2>
                    </div>
                    <div class="contacts" ng-repeat="user in chatCtrl.usersInChat">
                        <li>
                            <div class="d-flex bd-highlight">
                                <div class="img_cont">
                                    <span class="online_icon"></span>
                                </div>
                                <div class="user_info">
                                    <span>{{user.ufirstname}} {{user.ulastname}}</span>
                                </div>
                            </div>
                        </li>
                    </div>
                </div>


                <div class="card-footer" ng-app="fileUpload" ng-controller="ChatController">
                    <form name="myForm">
                        <div ng-show="myForm.file.$valid">
                            <img ngf-thumbnail="file" class="img_msg">
                        </div>
                        <button class="btn" style="margin: 10px 0;" ng-click="file = null" ng-show="file">Remove
                        </button>
                        <div class="input-group">

                            <div class="input-group-append">
                                <span class="input-group-text attach_btn" type="file" ngf-select ng-model="file"
                                      name="file"
                                      accept="image/*" ngf-max-size="2MB" required
                                      ngf-model-invalid="errorFile"><i class="fa fa-paperclip"></i>
                                    </span>
                            </div>
                            <!--<textarea class="form-control type_msg" name="message" ng-model="message"-->
                            <!--placeholder="Type your message..." required></textarea>-->
                            <input class="form-control type_msg" name="message" ng-model="message"
                                   placeholder="Type your message..." required/>
                            <div class="input-group-append">
                                <!--<button class="input-group-text send_btn" ng-disabled="!myForm.$valid"-->
                                <!--ng-click="uploadPic(picFile)"><i class="fa fa-location-arrow"></i></button>-->
                                <button class="input-group-text send_btn" ng-disabled="!myForm.$valid"
                                        ng-click="uploadPic(file)"><i class="fa fa-location-arrow"></i></button>

                            </div>
                        </div>
                        <i ng-show="myForm.message.$error.required">Message required*</i>
                        <i ng-show="myForm.file.$error.maxSize">File too large
                            {{errorFile.size / 1000000|number:1}}MB: max 2M</i>
                        <span class="progress" ng-show="file.progress >= 0">
                            <div style="width:{{file.progress}}%" ng-bind="file.progress + '%'">

                            </div>
                        </span>
                        <span ng-show="file.result">Upload Successful</span>
                        <span class="err" ng-show="errorMsg">{{errorMsg}}</span>

                    </form>

                </div>

                <!--<div  id="chat-list" style="height:300px;overflow:auto">-->

                <!-- Here come the messages in the chat, each one presented in card -->
                <div ng-repeat="m in chatCtrl.messageList">
                    <!-- This card provides space for the message and Like/dislike buttons -->
                    <div class="row">
                        <div class="col s12 m6 msg_container" >
                            <div class="card">
                                <div class="card-content">
                                    <!-- Card Title is the person who write the message -->
                                    <!-- Here comes the message text -->
                                    <div class="card-image">
                                        <img id="responsive-image" src={{m.p_photo}}>
                                    </div>
                                    <p>
                                        <font size="3.5"><b>{{m.p_user}} </b></font> {{m.p_message}} <b><i><font
                                            color="5FB5E3">
                                        {{m.p_hashtags}}</font></i></b>
                                    </p>
                                    <p>
                                        <i><b>{{m.p_date}}</b></i>
                                    </p>
                                </div>
                                <div class="card-action bg-primary">
                                    <a ng-click="chatCtrl.likeAdd(m)" class="btn-floating btn-small waves-effect waves-light blue"><i
                                            class="material-icons">thumb_up
                                    </i></a> <span ng-bind="m.plikes">  </span>
                                    <a ng-click="chatCtrl.dislikeAdd(m)" class="btn-floating btn-small waves-effect waves-light blue"><i
                                            class="material-icons">thumb_down
                                    </i></a><span ng-bind="m.pdislikes">  </span>

                                    <button type="submit" class="btn-floating btn-small waves-effect grey"
                                            value={{m.pid}}>
                                        <i class="material-icons">reply </i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

               <div class="col-md-9 reply_container">
                    <h4>Replies</h4>
                    <div style="overflow: auto">
                        <div class="card-action" ng-repeat="r in m.replies">
                            <h6><strong>{{r.reply_username}} </strong></h6>
                            <p>
                                {{r.reply_msg}}
                            </p>
                            <span class="reply_date right">{{r.reply_date}}</span>

                        </div>
                    </div>
                    <div class="card-action" style="display: flex; padding: 30px 0 0">
                        <form name="form"
                              ng-submit="chatCtrl.replyPost(m, replyTxt, 'reply'+m.postId)"
                              role="form"
                              style="width: 100%">
                            <div style="display: flex">
                                <input class="input_msg_write" id="reply{{m.postId}}" name="replyText"
                                       ng-model="replyTxt"
                                       placeholder="Reply Post..." required/>
                                <button class="btn-floating btn-small waves-effect grey" type="submit">
                                    <i class="material-icons">reply </i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
        </div>


    </div>
</div>



